##########
## Continuum imaging with cimager
##
#Standard Parameter set for Cimager
Cimager.dataset                                 = scienceData_SB11816_Norma_1A.beam12_averaged_cal.leakage.ms
Cimager.datacolumn                              = DATA
Cimager.imagetype                               = fits
#
# No Channels selection performed
#
Cimager.Images.Names                            = [image.i.SB11816.cont.Norma_1A.beam12]
Cimager.Images.shape                            = [6144, 6144]
Cimager.Images.cellsize                         = [2arcsec, 2arcsec]
Cimager.Images.image.i.SB11816.cont.Norma_1A.beam12.direction    = [16h12m49.644, -60.48.31.28, J2000]
# This is how many channels to write to the image - just a single one for continuum
Cimager.Images.image.i.SB11816.cont.Norma_1A.beam12.nchan        = 1
#
# The following are needed for MFS clean
# This one defines the number of Taylor terms
Cimager.Images.image.i.SB11816.cont.Norma_1A.beam12.nterms       = 2
# This one assigns one worker for each of the Taylor terms
Cimager.nworkergroups                           = 3
# Leave 'Cimager.visweights' to be determined by Cimager, based on nterms
# Leave 'Cimager.visweights.MFS.reffreq' to be determined by Cimager
#
# Options for the alternate imager
Cimager.nchanpercore                           = 8
Cimager.usetmpfs                               = false
Cimager.tmpfs                                   = /dev/shm
# barycentre and multiple solver mode not supported in continuum imaging (yet)
Cimager.barycentre                              = false
Cimager.solverpercore                           = false
Cimager.nwriters                                = 1
# New feature to reduce nFFTs from nChan to 1 and speed things up:
Cimager.combinechannels                         = true
#
# This defines the parameters for the gridding.
Cimager.gridder.snapshotimaging                 = false
Cimager.gridder.snapshotimaging.wtolerance      = 2600
Cimager.gridder.snapshotimaging.longtrack       = true
Cimager.gridder.snapshotimaging.clipping        = 0.01
Cimager.gridder                                 = WProject
Cimager.gridder.WProject.wmax                   = 35000
Cimager.gridder.WProject.nwplanes               = 557
Cimager.gridder.WProject.oversample             = 5
Cimager.gridder.WProject.maxsupport             = 1024
Cimager.gridder.WProject.variablesupport        = true
Cimager.gridder.WProject.offsetsupport          = true
Cimager.gridder.WProject.sharecf                = true
#
# These parameters define the clean algorithm
Cimager.solver                                  = Clean
Cimager.solver.Clean.solutiontype               = MAXBASE
Cimager.solver.Clean.verbose                    = false
Cimager.solver.Clean.decoupled                  = true
Cimager.solver.Clean.tolerance                  = 0.01
Cimager.solver.Clean.weightcutoff               = zero
Cimager.solver.Clean.weightcutoff.clean         = false
Cimager.threshold.masking                       = 0.9
Cimager.solver.Clean.logevery                   = 50
Cimager.solver.Clean.detectdivergence           = true
Cimager.Images.writeAtMajorCycle                = false
#
Cimager.preconditioner.Names                    = [Wiener]
Cimager.preconditioner.preservecf               = true
Cimager.preconditioner.Wiener.robustness        = 0.0
#
Cimager.restore                                 = true
Cimager.restore.beam                            = fit
Cimager.restore.beam.cutoff                     = 0.5
Cimager.restore.preconditioner.Names                    = [Wiener,GaussianTaper]
Cimager.restore.preconditioner.GaussianTaper            = [30arcsec, 30arcsec, 0deg] 
Cimager.restore.preconditioner.GaussianTaper.isPsfSize  = false
Cimager.restore.preconditioner.GaussianTaper.tolerance  = 0.005
Cimager.restore.preconditioner.preservecf               = true
Cimager.restore.preconditioner.Wiener.robustness        = 0.0
#
# Parameters set for loop 1
Cimager.threshold.majorcycle                    = 0.035mJy
Cimager.ncycles                                 = 15
Cimager.solver.Clean.algorithm                  = BasisfunctionMFS
Cimager.solver.Clean.niter                      = 3000
Cimager.threshold.minorcycle                    = [30%, 0.25mJy, 0.03mJy]
Cimager.solver.Clean.gain                       = 0.2
Cimager.solver.Clean.psfwidth                   = 4096
Cimager.solver.Clean.scales                     = [0,6,15,30,45,60]


#
# Self-calibration using the recently-generated cal table
Cimager.calibrate                           = false
